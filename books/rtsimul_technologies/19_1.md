[19 <--- ](19.md) [   Зміст   ](README.md) [--> 19.2](19_2.md)

## 19.1 INTRODUCTION

Control is a problem of finding a suitable (control) input driving a given system to a desired behavior. In general, there is extensive literature introducing the field of control and providing background material on solving control problems [1–3]. Having a system displaying a desired behavior is usually achieved by designing a controller that produces the necessary control in terms of the fed back actual (plant) output and a reference signal representing the desired (plant) output. The design of a controller working well for a given real plant in an actual environment requires the consideration of the behavior of the actual plant under the actual operating conditions [4–11]. In one extreme, such a controller design problem can be attempted to be solved by examining the simulated controller on a simulated plant under simulated operating conditions [2,12], while in another extreme, the approach relies on testing and tuning the controller hardware on the physical plant in the actual environment [13,14]. Testing the proposed controllers’ performance on the simulated or physical plant is followed by a redesigning or parameter tuning process performed offline or online. Both approaches have their own advantages/disadvantages and also difficulties for experimentation. For most of the cases, examining the controller candidates directly on the physical plant may not be possible in the laboratory environment or may be dangerous because of possible damages that may result [15,16]. In between these extremes lies an approach that mimics the physical plant in real time and in actual environmental conditions, especially in combination with the analog/digital interface units. However, such an approach is not only complicated in software simulations but it also yields, with great probability, unreliable simulators that are highly sensitive to the unavoidable modeling errors that each simulated unit embodies [17,18].

Управління — це проблема пошуку відповідного (керуючого) входу, що керує заданою системою до бажаної поведінки. Загалом, існує велика література, яка знайомить із галуззю управління та надає базові матеріали щодо розв’язування задач керування [1–3]. Наявність системи, що відображає бажану поведінку, зазвичай досягається розробкою контролера, який виробляє необхідне керування в термінах зворотного зв’язку фактичного (заводського) виходу та опорного сигналу, що представляє бажаний (заводський) вихід. Конструкція контролера, що добре працює для даної реальної установки в реальному середовищі, вимагає розгляду поведінки фактичної установки в фактичних умовах експлуатації [4–11]. В одній крайності таку проблему проектування контролера можна спробувати вирішити, досліджуючи змодельований контролер на змодельованій установці в змодельованих умовах роботи [2,12], тоді як в іншій крайності підхід покладається на тестування та налаштування апаратного забезпечення контролера на фізична рослина в реальному середовищі [13,14]. Після перевірки продуктивності пропонованих контролерів на змодельованій або фізичній установці слід перепроектування або процес налаштування параметрів, який виконується офлайн або онлайн. Обидва підходи мають свої переваги/недоліки, а також труднощі для експериментування. У більшості випадків перевірка кандидатів у контролери безпосередньо на фізичній установці може бути неможливою в лабораторних умовах або може бути небезпечною через можливі пошкодження, які можуть виникнути [15,16]. Між цими крайнощами лежить підхід, який імітує фізичну установку в реальному часі та в реальних умовах навколишнього середовища, особливо в поєднанні з аналоговими/цифровими інтерфейсними блоками. Однак такий підхід є не тільки складним у моделюванні програмного забезпечення, але він також дає, з великою ймовірністю, ненадійні симулятори, які є дуже чутливими до неминучих помилок моделювання, які втілює кожен змодельований блок [17,18].

In spite of these drawbacks, in general, simulation of control systems is preferred (1) for understanding the behavior of the plant together with its actuator and sensory devices based on their identified models obtained before an expensive and belabored implementation (i.e., for analysis) and (2) for testing the designed controllers whether the design specification are met (i.e., for synthesis). Analysis and/or synthesis platforms developed for general and also for certain specific purposes are documented in other works [16–27]. In the controller synthesis case, which is the main concern in this chapter, testing the controllers is followed by a redesign and/or tuning procedure. The developed controller design–test–redesign platform (CDTRP) consists of a simulator together with a software manager on a personal computer (PC) that is implemented with a graphical user interface (GUI), a microcontroller based emulator, and a hardware peripheral unit. CDTRP is intended to have the advantages of using simulated or emulated plants in the controller design and also of testing the candidate (simulated, emulated, or actual) controllers on the almost actual operating conditions. Depending on the implementation of the controller, plant, and peripheral unit as simulation, emulation, or physical hardware, the developed CDTRP can be operated in 24 different real-time operation modes (Tables 19.1 through 19.3). These operation modes are also referred to as *real-time simulation modes* [19–27], meaning the samething throughout this chapter. The simulator and emulator in all the 24 modes of CDTRP are designed for performing real-time simulations; however, they can be run faster or slower for different purposes. For example, a fast running plant emulator or simulator can be used for model reference adaptive control. So, the simulation modes that can be realized in the platform are not restricted to the mentioned 24 real-time modes. Some of the real-time simulation modes correspond to the well-known “hardware- in-the-loop simulation” [19–27], where the controller is realized as hardware and the plant is implemented on the PC or in the emulator ([Tables 19.1 ](#_bookmark101)through 19.3). Some of the other modes correspond to the well-known “control prototyping” and “software-in-the-loop simulation” [19, 20]. Both simulate the controller on the PC but differ from each other in the plant part. The first one is the physical and the second is implemented on the PC (Tables 19.1 through 19.3). The simulation modes of the developed CDTRP include not only the abovementioned “hardware-in-the-loop simulation,” “control prototyping,” and “software-in-the-loop simulation,” but also, up to the knowledge of the authors, all the other simulation modes in the literature.

Незважаючи на ці недоліки, загалом моделювання систем керування є кращим (1) для розуміння поведінки заводу разом із його приводом і сенсорними пристроями на основі їхніх ідентифікованих моделей, отриманих перед дорогим і складним впровадженням (тобто для аналізу). і (2) для перевірки розроблених контролерів на відповідність специфікації проекту (тобто для синтезу). Платформи аналізу та/або синтезу, розроблені для загальних, а також для певних конкретних цілей, задокументовані в інших роботах [16–27]. У випадку синтезу контролера, який є основною проблемою в цьому розділі, тестування контролерів супроводжується процедурою перепроектування та/або налаштування. Розроблена платформа проектування–тестування–редизайну контролера (CDTRP) складається з симулятора разом із програмним менеджером на персональному комп’ютері (ПК), який реалізований за допомогою графічного інтерфейсу користувача (GUI), емулятора на основі мікроконтролера та апаратної периферії . CDTRP призначений для того, щоб мати переваги використання змодельованих або емульованих установок у проекті контролера, а також тестування потенційних (модельованих, імітованих або фактичних) контролерів у майже реальних робочих умовах. Залежно від реалізації контролера, установки та периферійного пристрою як імітації, емуляції або фізичного обладнання, розроблений CDTRP може працювати в 24 різних режимах роботи в реальному часі (таблиці 19.1-19.3). Ці режими роботи також називаються *режимами симуляції в реальному часі* [19–27], що означає одне й те саме в цій главі. Симулятор і емулятор у всіх 24 режимах CDTRP призначені для виконання моделювання в реальному часі; однак їх можна запускати швидше або повільніше для різних цілей. Наприклад, швидко запущений емулятор або симулятор заводу можна використовувати для адаптивного керування еталонною моделлю. Отже, режими моделювання, які можна реалізувати на платформі, не обмежуються згаданими 24 режимами реального часу. Деякі з режимів симуляції в реальному часі відповідають добре відомому «апаратному моделюванню в циклі» [19–27], де контролер реалізований як апаратне забезпечення, а установка реалізована на ПК або в емуляторі ( [Таблиці 19.1 ](#_bookmark101)–19.3). Деякі з інших режимів відповідають добре відомим «контрольним прототипам» і «програмному моделюванню в циклі» [19, 20]. Обидва імітують контролер на ПК, але відрізняються один від одного частиною установки. Перший — фізичний, а другий — реалізований на ПК (таблиці 19.1–19.3). Режими моделювання розробленого CDTRP включають не лише згадане вище «моделювання апаратного забезпечення в циклі», «прототипування керування» та «моделювання програмного забезпечення в циклі», але також, за інформацією авторів, , усі інші режими моделювання в літературі.

 **TABLE** **19.1**  **Taxonomy  of Real-Time Simulation Modes of CDTRP. The Peripheral** **Unit  Is Implemented in the Simulator (PC)**

| **Plant** **Controller** | **Simulator** **(in** **PC)** | **Emulator** | **Physical (Hardware)** |
| ------------------------ | ----------------------------- | ------------ | ----------------------- |
| Simulator (in  PC)       | S-S-S                         | S-E-S        | S-P-S                   |
| Emulator                 | E-S-S                         | E-E-S        | E-P-S                   |
| Physical (Hardware)      | P-S-S                         | P-E-S        | P-P-S                   |

 **TABLE** **19.2**  **Taxonomy of Real-Time  Simulation Modes of CDRTP. The Peripheral** **Unit Is Implemented in the Emulator**

| **Plant** **Controller** | **Simulator** **(in** **PC)** | **Emulator** | **Physical (Hardware)** |
| ------------------------ | ----------------------------- | ------------ | ----------------------- |
| Simulator (in  PC)       | S-S-E                         | S-E-E        | S-R-E                   |
| Emulator                 | E-S-E                         | E-E-E        | E-P-E                   |
| Physical (Hardware)      | P-S-E                         | P-E-E        | P-P-E                   |

**TABLE** **19.3** **Taxonomy of Real-Time Simulation Modes of CDRTP. The Peripheral** **Unit** **Is** **Implemented** **as** **Physical** **Hardware** 

| **Physical** **(Hardware)** | **Simulator** **(in** **PC)** | **Emulator** | **Physical**  **(Hardware)** |
| --------------------------- | ----------------------------- | ------------ | ---------------------------- |
| Simulator (in  PC)          | –                             | S-E-P        | S-P-P                        |
| Emulator                    | –                             | E-E-P        | E-P-P                        |
| Physical (Hardware)         | –                             | P-E-P        | P-P-P                        |

*Note:* The first column modes are realized in CDTRP without using an additional analog interface extenstion for the PC.

The CDTRP platform is developed according to a controller design–test–redesign methodology, which can be stated as follows:

*Примітка:* Перші режими колонки реалізовані в CDTRP без використання додаткового розширення аналогового інтерфейсу для ПК.

Платформа CDTRP розроблена відповідно до методології проектування–тестування–перепроектування контролера, яка може бути сформульована таким чином:

•   To provide a high level of flexibility of choosing and testing controller and plant models from a wide variety by the simulator unit in the early stages of the controller design.

•   To create environmental conditions as close as possible to the real world by the emulator and peripheral units in the final stage of the controller design process.

So, the CDTRP can be used for the following:

•   The design–test–redesign of the controllers under the framework of a chosen specific controller design method (such as an adaptive or robust method)

•   Comparison of the performances of the different controller design methods, techniques, and algorithms on the simulated, emulated, or physical plants with the emphasis of the controller design in real time and the actual environment, and so supporting the selection of the best controller for a specific applications, on the other hand serving as a test-bed for researchers in examining their immature controller design method in its development phase

•   Verification and validation of a plant model [28–31] based on the simulated and emulated plants with emphasis on running in real time and in the actual environment

•   Controller design requiring a parameter training procedure based on the measurements and also calculations on an emulated (identified) plant model as in done artificial neural networks–based controller design methods [24,32–35]

•   Low cost real-time implementation of control systems based on the benchmark plants that are of educational value but difficult or impossible to realize in an educational laboratory [36] Similar real-time simulation platforms have been realized in the literature [6,10, 11,21,22,37,38]; however,

•   They are not dedicated to being a general purpose design–test–redesign controller platform.

•   They are restricted either to a specific control application (e.g., robot, specific electrical motors, pantograph, or dynamometer) or to a certain type of simulation mode such as software-in-the-loop or hardware-in-the-loop.

•   None of them possesses a (physical) hardware peripheral unit that comprises all of the (actual) analog and digital actuators, sensory devices, the external disturbance, parameter perturbation signal derivers, and analog/digital controller hardware components, and so they have the ability to recreate an actual environment in a more restricted sense than the CDTRP.

•   The frequency limits for the real-time simulation modes realized by these platforms have not been reported in contrast to the CDTRP.

•   They do not have a GUI unit capable of monitoring and controlling the overall simulation platform such as the one that the CDTRP includes. 

• Забезпечити високий рівень гнучкості вибору та тестування контролерів і моделей установок із широкого розмаїття симулятором на ранніх стадіях проектування контролера.

• Створення умов середовища, максимально наближених до реального світу, за допомогою емулятора та периферійних пристроїв на завершальній стадії процесу проектування контролера.

Отже, CDTRP можна використовувати для наступного:

• Проектування–тестування–перепроектування контролерів у рамках вибраного конкретного методу проектування контролера (наприклад, адаптивного або надійного методу)

• Порівняння продуктивності різних методів, методів і алгоритмів проектування контролерів на змодельованих, імітованих або фізичних установках з акцентом на дизайн контролера в реальному часі та фактичному середовищі, і таким чином підтримка вибору найкращого контролера для конкретні програми, з іншого боку, служачи випробувальним майданчиком для дослідників у вивченні їх незрілого методу проектування контролера на етапі розробки

• Верифікація та валідація моделі заводу [28–31] на основі змодельованих і емульованих заводів з акцентом на роботу в реальному часі та в реальному середовищі

• Розробка контролера, що вимагає процедури навчання параметрів на основі вимірювань, а також розрахунків на емульованій (ідентифікованій) моделі заводу, як у методах проектування контролера на основі штучних нейронних мереж [24,32–35]

• Низька вартість впровадження систем керування в реальному часі на основі еталонних установок, які мають освітню цінність, але важко або неможливо реалізувати в навчальній лабораторії [36]. Подібні платформи моделювання в реальному часі були реалізовані в літературі [6,10, 11,21,22,37,38]; однак,

• Вони не призначені для того, щоб бути платформою контролера проектування–тестування–перепроектування загального призначення.

• Вони обмежені або певною програмою керування (наприклад, роботом, конкретними електродвигунами, пантографом або динамометром), або певним типом режиму моделювання, таким як програмне забезпечення в циклі або апаратне забезпечення в циклі.

• Жоден із них не має (фізичного) апаратного периферійного блоку, який містить усі (фактичні) аналогові та цифрові приводи, сенсорні пристрої, зовнішні перешкоди, похідні сигналу збурення параметрів та апаратні компоненти аналогового/цифрового контролера, тому вони мають здатність відтворити реальне середовище в більш обмеженому сенсі, ніж CDTRP.

• Частотні обмеження для режимів симуляції в реальному часі, реалізованих цими платформами, не повідомлялися, на відміну від CDTRP.

• Вони не мають блоку графічного інтерфейсу користувача, здатного контролювати та контролювати загальну платформу моделювання, таку як та, яку включає CDTRP.

This chapter is organized as follows. In Section 19.2, the developed platform CDTRP is briefly described presenting its subunits (i.e., the emulator card, the software simulator on the PC, the hardware peripheral unit, and the GUI managing the overall platform). Structural properties and functions of the emulator, simulator, and peripheral unit; the facilities supplied by the GUI; and a block diagram for the emulator card that is made up of the PIC microcontroller and its input–output interfaces are given in this section. The real-time operating modes provided by the CDTRP are described in Section 19.3 by the introduced taxonomy together with a soft categorization based on their suitability to the design, test, and redesign stages in a controller design process in Section 19.4. The implementation of a plant emulator card and experimental setup of the developed CDTRP are given in Sections 19.5 and 19.6. In Section 19.7.1, the implementation of the operating modes of the CDTRP are demonstrated on several benchmark plants for, in a sense, verification of the simulation platform. The experimental results on the implementation of design–test–redesign procedure of a physical plant (i.e., a micro DC motor) are given in Section 19.7.2. In Section 19.7.3, the coupled Lorenz chaotic systems and pendulums are used as tools for investigating the frequency range for the plant and controller dynamics to be simulated and/or emulated reliably in different real-time operating modes of the CDTRP. The conclusions of the developed CDTRP are given in Section 19.8.

Цей розділ організовано таким чином. У Розділі 19.2 коротко описано розроблену платформу CDTRP із представленням її підрозділів (тобто карти емулятора, симулятора програмного забезпечення на ПК, апаратної периферії та графічного інтерфейсу користувача, що керує загальною платформою). Структурні властивості та функції емулятора, симулятора та периферійного пристрою; засоби, що надаються GUI; і блок-схема карти емулятора, яка складається з мікроконтролера PIC і його інтерфейсів вводу-виводу, наведені в цьому розділі. Режими роботи в реальному часі, які надає CDTRP, описані в Розділі 19.3 за допомогою введеної таксономії разом із м’якою категоризацією на основі їх придатності для етапів проектування, тестування та редизайну в процесі проектування контролера в Розділі 19.4. Реалізація карти емулятора заводу та експериментальна установка розробленого CDTRP наведені в розділах 19.5 та 19.6. У Розділі 19.7.1 демонструється реалізація робочих режимів CDTRP на кількох еталонних установках для, у певному сенсі, перевірки платформи моделювання. Експериментальні результати щодо впровадження процедури проектування–випробування–перепроектування фізичної установки (тобто мікродвигуна постійного струму) наведено в розділі 19.7.2. У Розділі 19.7.3 пов’язані хаотичні системи Лоренца та маятники використовуються як інструменти для дослідження частотного діапазону для динаміки установки та контролера, яка надійно моделюється та/або емулюється в різних режимах роботи CDTRP у реальному часі. Висновки розробленого CDTRP наведені в розділі 19.8.

[19 <--- ](19.md) [   Зміст   ](README.md) [--> 19.2](19_2.md)