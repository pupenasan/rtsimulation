[11.10 <--- ](11_10.md) [   Зміст   ](README.md) [--> 11.12](11_12.md)

## 11.11. AN INDUSTRIAL CASE STUDY

As an illustration of the usage of the presented framework, an extract of the industrial case study presented in Tranberg-Hansen et al. [21] is given, in which a mobile audio processing platform developed by the Danish company Bang & Olufsen ICEpower was explored.

### 11.11.1 A Mobile Audio Process ing Platform

The mobile audio processing platform, illustrated in Figure 11.13, is comprised of a digital front end and a class D amplifier including the analog power stage on-chip. The platform offers stereo speaker and stereo headphone audio processing, resulting in a total of four audio channels being processed.

The application receives one common stereo audio stream, consisting of a left and right audio stream. After the processing of algorithm **A**, these are split into four separate audio streams. Two are for speakers and two are for headphones, to allow a separate processing of the speaker and the headphone streams. The resulting application model is shown in [Figure 11.14](#_bookmark67).

The platforms considered here are based on the use of an application-specific instruction set processor (ASIP), which is optimized to execute the type of algorithms necessary in the case-study application. The ASIP has a shallow three-stage pipeline and offers 61 different instructions. Even though the pipeline is shallow, the instructions are relatively complex: the processor offers a dedicated second-order IIR filter instruction that is used heavily in the application considered. Two versions of the ASIP were described: (1) a high-level model that models only the latency of each instruction offered and (2) a detailed cycle accurate and bit true model. The latency models do not model the actual functionality but only the resource access and latency of each service without any modeling of data dependencies.

![image-20220822184018469](E:\san\Технології\моделиров\gitver_rtsimul\books\rtsimul_technologies\media\image-20220822184018469.png) 

**FIGURE** **11.13** Overview of the case-study platform.

![image-20220822184032535](E:\san\Технології\моделиров\gitver_rtsimul\books\rtsimul_technologies\media\image-20220822184032535.png)

**FIGURE 11.14** The application model of the case study. The application model contains 14 tasks (2 × A, 4 × B, 4 × C, 4 × D) for modeling the processing of the audio streams, 6 tasks (2 × SRC, 4 × SINK) for modeling the audio interfaces to and from the environment, as well as the environment itself, and finally an additional task (CTRL) for modeling the changes of the application state and/or control parameter changes that influence the individual audio processing parts.

A number of platform models were constructed consisting of one to four ASIPs (ASIPx1-ASIPx4). Subsequently, the application model, capturing the functional requirements of the application, was mapped onto the platform models based on the latency ASIP service models. Because the latency-based service models do not model the actual functionality, the control flow of the application must be handled in the application model and the tasks mapped to the individual latency-based service models. This group of system models is hence named latency. The four platforms were then refined to use the bit true and cycle accurate service model of the ASIP using the compositional properties of the framework. The tasks of the application models were mapped to the ASIP service model processing elements. The tasks were represented as service request images generated using the existing compiler infrastructure associated with the ASIP. In this way, a one-to-one correspondence with the physical execution of the application can be obtained. These system models are referred to as compiled system models.

To relate the simulation speed and quality of the performance estimates produced by the models described using the modified HCPN model-of-computation, a register transfer level implementation of the ASIPx1 platform was created in the hardware description language Verilog, referred to as the RTL model in the following.

**TABLE** **11.2**  **Estimated Number  of Cycles for  the Processing of 3000 Samples in One Audio Channel at Three  Levels of Abstraction. A, B, C,** **and D Are the Different Tasks of the  Application Being Executed**

|           | **Latency** | **Compiled** | **RTL**     |
| --------- | ----------- | ------------ | ----------- |
| A         | 84,034      | 102,034      | 102,034     |
| B         | 123,041     | 129,384      | 129,384     |
| C         | 33,011      | 33,011       | 33,011      |
| D         | 153,051     | 168,056      | 168,056     |
| **Total** | **393,137** | **429,143**  | **429,143** |

### 11.11.2 Accuracy

The simulations performed, using the RTL model, were compared with the results obtained from the performance estimation framework.

Table 11.2 shows the estimated number of cycles used to process a stereo audio channel produced by the framework for the latency and the compiled ASIPx1-system model and estimates extracted from the RTL model simulations. The table shows that the cycle estimates obtained from the latency model in which only the latencybased service models are used is *not* cycle accurate. The cycle estimates produced by the latency model are, in general, too optimistic. This is caused by the fact that the latency-based model does not take data dependencies into account. In the other range of the scale, in terms of accuracy, the table also shows the cycle estimates of the refined compiled model in which a cycle accurate and bit true modeling of the components was used. In this case, the cycle estimates are identical with the estimates obtained from the RTL model as can be seen from the table.

The RTL model constructed was also used to make a comparison of the functional results produced by the framework using the compiled version of the ASIPx1 platform, which proved to be 100% identical to the results obtained from the RTL model. Furthermore, the time required to describe the model using the presented framework is much less than the time required to describe the equivalent RTL model because of the higher level of abstraction used. More importantly, it is significantly faster to modify a model of the framework in case of bug fixes or functionality extensions. 

### 11.11.3 Simulation Speed

[Table 11.3 ](#_bookmark68)shows the measured simulation speeds expressed as cycles per second for the individual system models investigated. Simulations were performed on a 2.0 GHz Intel Core 2 Duo processor with 2 GB RAM. What is most interesting is the substantial speedup seen when comparing the simulation speed of a detailed bit true and cycle accurate version of the ASIPx1-system model as opposed to the equivalent register transfer level simulation. The ASIPx1-system model runs at approximately 20 million cycles per second with all algorithms enabled, including data logging, and the functionally equivalent RTL description runs with approximately 15,000 cycles/second resulting in a speedup of more than 1000× compared to the RTL simulation.

**TABLE** **11.3** **Obtainable Simulation Speed (Simulation Cycles per** **Second) of the Investigated System Models**

|        | **Latency** | **Compiled** | **RTL** |
| ------ | ----------- | ------------ | ------- |
| ASIPx1 | 21.7M       | 19.9M        | 15,324  |
| ASIPx2 | 18.6M       | 15.8M        | N/A     |
| ASIPx3 | 17.2M       | 13.8M        | N/A     |
| ASIPx4 | 15.9M       | 12.4M        | N/A     |

[11.10 <--- ](11_10.md) [   Зміст   ](README.md) [--> 11.12](11_12.md)