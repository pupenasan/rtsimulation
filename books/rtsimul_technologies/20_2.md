[20.1 <--- ](20_1.md) [   Зміст   ](README.md) [--> 20.3](20_3.md)

**20.1**            **RT** **TECHNIQUES** **FOR** **AUTOMOTIVE** **SYSTEMS**

Numerical RT simulation of the behavior of any dynamic system is based on specific formulations of the dynamics. These models are mathematical relationships represented either as differential equations, difference equations, or hybrid approaches (Mosterman and Biswas 2002). Particularly, the modeling of automotive systems imposes several challenges:

 

•   A vehicle comprises a plurality of physical domains.

•   The time scales of the dynamics cover several orders of magnitude.

•   A combinatorial variety of vehicle types and configurations exists.

•   A vital need for disclosure of intellectual property by the original equipment manufacturers (OEM) is evident.

 

Although today’s vehicles rely increasingly on computers, they are still classical multidomain systems. Table 20.1 lists the predominant domains involved and common ways to model these domains in the field of RT simulation.

According to the continuous nature of almost all technical parts, their physics is described by partial differential equations (PDEs) and hence numerically best through the finite element method (FEM) and related methods. As shown in Table 20.1, this abstraction of physical reality is not often considered in the field of automotive RT simulation. With this in mind, which abstractions are considered and for what reasons?

Many types of formalisms, such as FEM or computational fluid dynamics (CFD) with their fine-grained discretization in space and time, can be ruled out for RT

 

 

| **TABLE** **20.1**  **Modeling** **Domains** **in** **Automotive** **RT** **Simulation** |                                                   |                                                              |
| ------------------------------------------------------------ | ------------------------------------------------- | ------------------------------------------------------------ |
| **Domain**                                                   | **Technical** **aspect**                          | **Typical** **modeling** **formalism**                       |
| Rigid and elastic body mechanics                             | Drivetrain, engine  crank, chassis, axles,  tires | Multibody dynamics, machine dynamics                         |
| Electrical                                                   | Electrical  system, ancillaries, drives           | Analog/digital  circuit simulation                           |
| Chemistry                                                    | Combustion, battery, exhaust  after-treatment     | Rate  equations of net reactions                             |
| Thermodynamics                                               | Combustion, air/exhaust, battery                  | Equilibrium  thermodynamics, filling  and emptying,  one-dimensional flows |
| Hydraulics                                                   | Fuel system, brakes, steering                     | Filling and  emptying, one-dimensional  flows                |
| Thermal                                                      | Cooling system                                    | Phenomenological  linear  thermodiffusion                    |
| Control                                                      | ECU                                               | Linear control, neural networks (Meder  et al. 2007)         |
| Computer science                                             | ECU, smart components                             | Automata, statecharts, RT-UML (Douglass 2004)                |



**504**                             Real-Time Simulation Technologies

 

applications. Complex models that must observe an immense number of variables over an extended period of time, such as those for simulating gas flow, challenge current computing hardware. If that is the case, then how can one accelerate the computational ability of a technical system model? Computational demand is proportional to the number of simulation state variables *x*(*t*). Reducing to a lower number of simulation state variables is beneficial for two reasons: First, the smaller system can be formulated by ordinary nonlinear differential equations (ODEs) or differential algebraic equations (DAE), where

 

0 = *f* (*x*, *x* , *u*, *p*, *t*)

 

governs the time evolution of *x*(*t*) (Vidyasagar 1993). The variable *u* represents the control inputs, and the variable *p* represents all parameters that do not appear as time derivatives. This approach often delivers satisfying quality of simulation results. The vast amount of simulation variables present in an FEM formulation is condensed to several physically meaningful states and allows for control laws to be designed much easier. The restrictions of this process are obvious: one must be careful when fundamental assumptions for the reduced model will not hold or when interesting phenomena will be completely neglected. In the field of internal combustion engine (ICE) simulation, these are certainly regions where one approaches the limits of thermodynamic equilibrium. The most prominent ones are the near-supersonic processes that take place in a turbocharger or the processes of combustion and gas exchange in a cylinder.

Secondly, an often overseen issue is that the reduction to a few simulation states affects the necessity for obtaining suitable data. Efforts to parameterize the model may reduce considerably because the governing differential equations take lumped values. For instance, a total mass is required instead of a mass distribution, or a scalar value or characteristic map of a heat transfer coefficient is used instead of a thermodiffusion process. Particularly in the automotive field, a valid and consistent set of data leading to parameters *p* for the parameterization of simulation models is difficult to obtain. Intellectual property issues are one reason for this. The main reason, however, lies in the early, or conceptual, phase of technical design where employing simulation tools is most advantageous: necessary data at this point in time are either scarce, unconsolidated, or simply not available for use in the simulation. This situation is aggravated by the fact that good data are essential for reliable simulation results. The reader is referred to Section 20.3.2 for more details.

Apart from the mathematical formulation of the causal behavior of an automotive system, there is a second distinctly important aspect to RT modeling and simulation: the notion of *time*. The most obvious way in which the treatment of time affects RT simulation is through the time discretization within the numerical simulation. Numerical integration schemes make time discrete by using fixed or variable step sizes and project the approximation of the exact ODE/DAE solution onto a sampling grid (Brenan et al. 1987). This grid must satisfy several requirements in order to lead to a meaningful solution:



Automotive Real-Time Simulation                               **505**

 

•   The computational load induced by the evaluation of the simulation model at each grid point must match the computing power of the RT platform to avoid task overruns. Depending on the type of RT system, such task overruns either can be tolerable or must be avoided at all costs (Schuette and Ploeger 2007). Automotive applications such as vehicle dynamics test rigs traditionally use sampling rates of 1 kHz. This restricts the integration scheme to being a fixed-step method where the number of grid points is proportional to computational load. The Forward Euler method (Brenan et al. 1987) is the most prominent among them in that it guarantees a finite execution time.

•   The eigenfrequencies of the model impose an upper boundary on the used step size. Especially for engine applications, this leads to sampling rates of at least 100 kHz as mentioned in Section 20.3.1 for calculating the in-cylinder pressure.

•   Automotive systems often contain highly reactive subsystems. As a consequence, it is, for example, for a HIL application, not sufficient (although necessary) to have the simulation run in synchrony with a physical process. Synchronicity with the physical process is superseded by the more stringent requirement of reactivity. Well-defined reaction times to external stimulation are crucial in embedded ECU applications. Particularly, the reaction of the cylinder and combustion model to the timing-critical fuel injection signals must take place within a time frame of tens of microseconds (see Section 20.4.2).

 

Amenability to RT execution is also affected by the way time itself is modeled, which tends to be less obvious as it is more implicitly incorporated in the modeling formalism. The states in a continuous-time model, for example, formulated as an ODE/DAE system, may change smoothly over time. In contrast with this type of model, there are discrete-event models where the state is an element belonging to a discrete set and will change abruptly over time, which is well suited to efficiently model abstract-switching behavior. This discontinuous behavior is often modeled as a finite-state machine, statecharts, or a state-transition diagram. In RT applications where computational efficiency is paramount, RT simulation models are usually combinations of continuous and discrete behavior, also known as hybrid dynamic systems. Although well-suited to RT applications, these introduce additional complexity in terms of numerics and modeling; see Mosterman and Biswas (2002) for more details. There is a large variety of tools for RT modeling and simulation. Some approaches provide the possibility to model any hybrid dynamic system, without restrictions to the physical domain, in a modular and block-oriented way. Prominent examples are native Simulink® (Simulink 2004) and Modelica (Modelica 2010). While the first employs causal modeling, the latter is an acausal modeling formalism, which has certain advantages, for example, for model inversion. Multidomain tools with a special focus on automotive systems are, for example, ASCET-MD (ASCET-MD 2009), for the development of embedded automotive control systems, GT-Suite (GT-Suite 2009), and AMESim (AMESim 2009) for zero and one-dimensional modeling of

physical systems with an option to generate RT capable code.

[20.1 <--- ](20_1.md) [   Зміст   ](README.md) [--> 20.3](20_3.md)